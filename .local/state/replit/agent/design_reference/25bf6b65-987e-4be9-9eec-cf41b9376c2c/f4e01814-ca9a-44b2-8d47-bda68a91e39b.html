<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Chat - Real-time Customer Support</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    popover: {
                        DEFAULT: "var(--popover)",
                        foreground: "var(--popover-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                }
            },
            fontFamily: {
                sans: ["Inter", "var(--font-sans)"],
            }
        },
    };
    </script>
    <style>
        :root {
            --background: hsl(210 40% 98%);
            --foreground: hsl(222.2 84% 4.9%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(222.2 84% 4.9%);
            --popover: hsl(0 0% 100%);
            --popover-foreground: hsl(222.2 84% 4.9%);
            --primary: hsl(221.2 83.2% 53.3%);
            --primary-foreground: hsl(210 40% 98%);
            --secondary: hsl(210 40% 96%);
            --secondary-foreground: hsl(222.2 47.4% 11.2%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215.4 16.3% 46.9%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(222.2 47.4% 11.2%);
            --destructive: hsl(0 84.2% 60.2%);
            --destructive-foreground: hsl(210 40% 98%);
            --border: hsl(214.3 31.8% 91.4%);
            --input: hsl(214.3 31.8% 91.4%);
            --ring: hsl(221.2 83.2% 53.3%);
            --radius: 8px;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        .message-bubble-user {
            background: linear-gradient(135deg, hsl(221.2 83.2% 53.3%), hsl(221.2 83.2% 58.3%));
        }
        
        .message-bubble-support {
            background: hsl(0 0% 100%);
            border: 1px solid hsl(214.3 31.8% 91.4%);
        }
        
        .typing-indicator {
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-indicator:nth-child(1) { animation-delay: 0s; }
        .typing-indicator:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-10px); opacity: 1; }
        }
        
        .connection-pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .scroll-smooth {
            scroll-behavior: smooth;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-background font-sans antialiased">
    <!-- @COMPONENT: ChatApplication [Main chat interface with real-time messaging] -->
    <div class="flex h-screen bg-background">
        
        <!-- @COMPONENT: Sidebar [Connection status and chat info] -->
        <div class="hidden lg:flex lg:flex-col lg:w-80 bg-card border-r border-border">
            <!-- Header -->
            <div class="p-6 border-b border-border">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-primary rounded-lg flex items-center justify-center">
                        <i class="fas fa-headset text-primary-foreground text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-semibold text-foreground">Support Chat</h1>
                        <p class="text-sm text-muted-foreground">Get help instantly</p>
                    </div>
                </div>
            </div>
            
            <!-- Connection Status -->
            <div class="p-6 border-b border-border">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-3 h-3 bg-green-500 rounded-full connection-pulse"></div>
                    <span class="text-sm font-medium text-foreground">Connected</span>
                </div>
                <div class="text-xs text-muted-foreground space-y-1">
                    <div data-bind="connection.status">Socket.IO Connected</div>
                    <div data-bind="connection.latency">Latency: 45ms</div>
                    <div data-bind="connection.lastPing">Last ping: 2s ago</div>
                </div>
            </div>
            
            <!-- Chat Information -->
            <div class="p-6">
                <h3 class="text-sm font-medium text-foreground mb-3">Chat Information</h3>
                <div class="space-y-3 text-sm text-muted-foreground">
                    <div class="flex justify-between">
                        <span>Session ID:</span>
                        <span data-bind="session.id" class="font-mono text-xs">#CHT-2024-001</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Started:</span>
                        <span data-bind="session.startTime">2:45 PM</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Messages:</span>
                        <span data-bind="session.messageCount">8</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="p-6 mt-auto border-t border-border">
                <h3 class="text-sm font-medium text-foreground mb-3">Quick Actions</h3>
                <div class="space-y-2">
                    <button class="w-full text-left p-3 rounded-lg hover:bg-accent transition-colors text-sm text-muted-foreground hover:text-accent-foreground">
                        <i class="fas fa-file-alt mr-2"></i>
                        View Chat History
                    </button>
                    <button class="w-full text-left p-3 rounded-lg hover:bg-accent transition-colors text-sm text-muted-foreground hover:text-accent-foreground">
                        <i class="fas fa-download mr-2"></i>
                        Export Conversation
                    </button>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: Sidebar -->
        
        <!-- @COMPONENT: MainChatArea [Primary chat interface] -->
        <div class="flex-1 flex flex-col">
            
            <!-- @COMPONENT: ChatHeader [Top navigation and status] -->
            <header class="bg-card border-b border-border px-4 py-4 lg:px-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button class="lg:hidden p-2 hover:bg-accent rounded-lg transition-colors">
                            <i class="fas fa-bars text-muted-foreground"></i>
                        </button>
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center">
                                <i class="fas fa-user-tie text-primary-foreground"></i>
                            </div>
                            <div>
                                <h2 class="font-semibold text-foreground">Support Team</h2>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-sm text-muted-foreground">Online • Avg response: 2 min</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <button class="p-2 hover:bg-accent rounded-lg transition-colors" title="Voice Call">
                            <i class="fas fa-phone text-muted-foreground"></i>
                        </button>
                        <button class="p-2 hover:bg-accent rounded-lg transition-colors" title="Video Call">
                            <i class="fas fa-video text-muted-foreground"></i>
                        </button>
                        <button class="p-2 hover:bg-accent rounded-lg transition-colors" title="More Options">
                            <i class="fas fa-ellipsis-v text-muted-foreground"></i>
                        </button>
                    </div>
                </div>
            </header>
            <!-- @END_COMPONENT: ChatHeader -->
            
            <!-- @COMPONENT: MessagesContainer [Scrollable message area] -->
            <div class="flex-1 overflow-y-auto p-4 lg:p-6 space-y-4 scroll-smooth bg-background" id="messagesContainer">
                
                <!-- Welcome Message -->
                <div class="flex justify-center">
                    <div class="bg-card rounded-lg px-4 py-2 border border-border">
                        <p class="text-sm text-muted-foreground text-center">
                            <i class="fas fa-shield-alt mr-2"></i>
                            Chat started • Your conversation is secure and encrypted
                        </p>
                    </div>
                </div>
                
                <!-- @MAP: messages.map(message => ( -->
                
                <!-- Support Message -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user-tie text-primary-foreground text-sm"></i>
                    </div>
                    <div class="flex-1 max-w-xs lg:max-w-md">
                        <div class="message-bubble-support rounded-lg px-4 py-3 shadow-sm">
                            <p class="text-sm text-foreground" data-bind="message.text">
                                Hello! Welcome to our support chat. How can I help you today?
                            </p>
                        </div>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="text-xs text-muted-foreground" data-bind="message.sender">Support Agent</span>
                            <span class="text-xs text-muted-foreground" data-bind="message.timestamp">2:45 PM</span>
                            <i class="fas fa-check-double text-xs text-green-500" title="Delivered"></i>
                        </div>
                    </div>
                </div>
                
                <!-- User Message -->
                <div class="flex items-start space-x-3 justify-end">
                    <div class="flex-1 max-w-xs lg:max-w-md">
                        <div class="message-bubble-user rounded-lg px-4 py-3 shadow-sm text-right">
                            <p class="text-sm text-primary-foreground" data-bind="message.text">
                                Hi! I'm having trouble with my account login. It keeps saying my password is incorrect.
                            </p>
                        </div>
                        <div class="flex items-center justify-end space-x-2 mt-1">
                            <i class="fas fa-check-double text-xs text-green-500" title="Delivered"></i>
                            <span class="text-xs text-muted-foreground" data-bind="message.timestamp">2:46 PM</span>
                            <span class="text-xs text-muted-foreground" data-bind="message.sender">You</span>
                        </div>
                    </div>
                    <div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user text-accent-foreground text-sm"></i>
                    </div>
                </div>
                
                <!-- AI Auto-Response -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div class="flex-1 max-w-xs lg:max-w-md">
                        <div class="message-bubble-support rounded-lg px-4 py-3 shadow-sm border-l-4 border-l-purple-500">
                            <div class="flex items-center space-x-2 mb-2">
                                <i class="fas fa-magic text-purple-500 text-xs"></i>
                                <span class="text-xs font-medium text-purple-600">AI Assistant</span>
                            </div>
                            <p class="text-sm text-foreground" data-bind="ai.response">
                                I understand you're having login issues. I'm connecting you with a human agent who can help reset your password securely. In the meantime, you can try the "Forgot Password" link on the login page.
                            </p>
                        </div>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="text-xs text-muted-foreground">AI Assistant</span>
                            <span class="text-xs text-muted-foreground" data-bind="ai.timestamp">2:46 PM</span>
                            <i class="fas fa-check-double text-xs text-green-500" title="Delivered"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Support Response -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user-tie text-primary-foreground text-sm"></i>
                    </div>
                    <div class="flex-1 max-w-xs lg:max-w-md">
                        <div class="message-bubble-support rounded-lg px-4 py-3 shadow-sm">
                            <p class="text-sm text-foreground" data-bind="message.text">
                                I can definitely help you with that! Let me check your account status. Can you please provide me with the email address associated with your account?
                            </p>
                        </div>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="text-xs text-muted-foreground" data-bind="message.sender">Sarah Chen</span>
                            <span class="text-xs text-muted-foreground" data-bind="message.timestamp">2:47 PM</span>
                            <i class="fas fa-check-double text-xs text-green-500" title="Delivered"></i>
                            <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full">via Slack</span>
                        </div>
                    </div>
                </div>
                
                <!-- User Response -->
                <div class="flex items-start space-x-3 justify-end">
                    <div class="flex-1 max-w-xs lg:max-w-md">
                        <div class="message-bubble-user rounded-lg px-4 py-3 shadow-sm text-right">
                            <p class="text-sm text-primary-foreground" data-bind="message.text">
                                Sure! My email is john.doe@email.com
                            </p>
                        </div>
                        <div class="flex items-center justify-end space-x-2 mt-1">
                            <i class="fas fa-check-double text-xs text-green-500" title="Delivered"></i>
                            <span class="text-xs text-muted-foreground" data-bind="message.timestamp">2:48 PM</span>
                            <span class="text-xs text-muted-foreground" data-bind="message.sender">You</span>
                        </div>
                    </div>
                    <div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user text-accent-foreground text-sm"></i>
                    </div>
                </div>
                
                <!-- @END_MAP )) -->
                
                <!-- Typing Indicator -->
                <div class="flex items-start space-x-3" id="typingIndicator" style="display: none;">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user-tie text-primary-foreground text-sm"></i>
                    </div>
                    <div class="flex-1 max-w-xs lg:max-w-md">
                        <div class="message-bubble-support rounded-lg px-4 py-3 shadow-sm">
                            <div class="flex items-center space-x-1">
                                <div class="w-2 h-2 bg-muted-foreground rounded-full typing-indicator"></div>
                                <div class="w-2 h-2 bg-muted-foreground rounded-full typing-indicator"></div>
                                <div class="w-2 h-2 bg-muted-foreground rounded-full typing-indicator"></div>
                                <span class="ml-2 text-xs text-muted-foreground">Sarah is typing...</span>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            <!-- @END_COMPONENT: MessagesContainer -->
            
            <!-- @COMPONENT: MessageInput [Bottom input area] -->
            <div class="border-t border-border bg-card p-4 lg:p-6">
                <div class="flex items-end space-x-3">
                    <button class="p-3 hover:bg-accent rounded-lg transition-colors flex-shrink-0" title="Attach File">
                        <i class="fas fa-paperclip text-muted-foreground"></i>
                    </button>
                    
                    <div class="flex-1 relative">
                        <div class="bg-background border border-border rounded-lg">
                            <textarea 
                                data-bind="messageInput.value"
                                data-event="keypress:handleKeyPress"
                                placeholder="Type your message..." 
                                class="w-full p-3 bg-transparent border-0 resize-none focus:outline-none text-sm text-foreground placeholder-muted-foreground"
                                rows="1"
                                style="min-height: 44px; max-height: 120px;"
                            ></textarea>
                            
                            <!-- Character Counter -->
                            <div class="px-3 pb-2 flex justify-between items-center">
                                <div class="flex items-center space-x-2 text-xs text-muted-foreground">
                                    <span data-bind="messageInput.characterCount">0/2000</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-1 hover:bg-accent rounded transition-colors" title="Emoji">
                                        <i class="fas fa-smile text-muted-foreground text-sm"></i>
                                    </button>
                                    <button class="p-1 hover:bg-accent rounded transition-colors" title="GIF">
                                        <i class="fas fa-images text-muted-foreground text-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button 
                        data-event="click:sendMessage"
                        data-implementation="Should validate message and send via Socket.IO"
                        class="p-3 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg transition-colors flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed"
                        title="Send Message"
                    >
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                
                <!-- Connection Status Bar -->
                <div class="flex items-center justify-between mt-3 text-xs text-muted-foreground">
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>Connected to support</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span>Encrypted • Socket.IO</span>
                        <span data-bind="lastActivity">Last activity: Now</span>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: MessageInput -->
            
        </div>
        <!-- @END_COMPONENT: MainChatArea -->
        
    </div>
    <!-- @END_COMPONENT: ChatApplication -->
    
    <!-- Socket.IO Integration -->
    <script>
        // TODO: Implement Socket.IO client connection
        (function() {
            // Mock Socket.IO implementation for design purposes
            let messageCount = 8;
            let isConnected = true;
            let isTyping = false;
            
            // Simulate typing indicator
            function showTypingIndicator() {
                const indicator = document.getElementById('typingIndicator');
                if (indicator) {
                    indicator.style.display = 'flex';
                    setTimeout(() => {
                        indicator.style.display = 'none';
                    }, 3000);
                }
            }
            
            // Simulate auto-scroll to bottom
            function scrollToBottom() {
                const container = document.getElementById('messagesContainer');
                if (container) {
                    container.scrollTop = container.scrollHeight;
                }
            }
            
            // Initialize chat interface
            document.addEventListener('DOMContentLoaded', function() {
                scrollToBottom();
                
                // Simulate periodic typing indicators
                setInterval(() => {
                    if (Math.random() < 0.1) { // 10% chance every 5 seconds
                        showTypingIndicator();
                    }
                }, 5000);
            });
            
            // Message sending simulation
            window.sendMessage = function(text) {
                // TODO: Implement actual Socket.IO message sending
                console.log('Sending message:', text);
                messageCount++;
                scrollToBottom();
            };
            
            // Socket connection status updates
            window.updateConnectionStatus = function(status) {
                // TODO: Update UI based on Socket.IO connection status
                isConnected = status === 'connected';
            };
            
        })();
    </script>
    
    <!-- @FUNCTIONALITY: This chat interface should implement Socket.IO for real-time messaging -->
    <!-- @STATE: messages:array = [], isConnected:boolean = true, isTyping:boolean = false -->
    <!-- @STATE: currentUser:object = {id, name, avatar}, connectionLatency:number = 45 -->
</body>
</html>